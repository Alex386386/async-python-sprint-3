# ЯП - Спринт 3 - Проект мессенджера с использованием синтаксиса async/await.

### Описание

Проект мессенджера реализованный с использованием синтаксиса async/await. 
Сервер реализован с использованием StreamReader и StreamWriter.
После запуска сервера и подключения всех клиентов, они оказываются в общем чате в котором могут писать сообщения друг другу.
Пользователи так же могут создавать отдельные чаты в которые могут приглашать людей, или посылать приватные сообщения конкретным пользователям.
По завершению работы сервера работа клиентов автоматически прекращается, а состояние сервера сохраняется в файл.
В последующем при запуске сервера его состояние будет загружено из файла, но если срок жизни сообщения истёк, оно будет удалено.
В проекте встроено логирование.

### Установка, Как запустить проект:
https://github.com/Alex386386/async-python-sprint-3
Клонировать репозиторий и перейти в него в командной строке:

```
git clone git@github.com:Alex386386/async-python-sprint-3
```

```
cd async-python-sprint-3
```

Создать и активировать виртуальное окружение:

```
python3 -m venv env
```

* Если у вас Linux/macOS

    ```
    source env/bin/activate
    ```

* Если у вас windows

    ```
    source env/scripts/activate
    ```

```
python3 -m pip install --upgrade pip
```

Установить зависимости из файла requirements.txt:

```
pip install -r requirements.txt
```

### Работа с мессенджером:

Запуск сервера производится через команду:
```
python streem_server.py
```
Могут быть дополнительные аргументы хоста и порта "streem_server.py [-h] [-H HOST] [-p PORT]".

В дальнейшем вся работа будет производиться через приложения клиента, чтобы закончить выполнение сервера, введите команду ctrl+c.
Срок жизни сообщений равен одному часу.
При останове сервера, все сообщения и группы сохранятся в файле server_state.json, и при повторном запуске сервера, состояние будет загружено из этого файла.
Посмотреть логи работы сервера можно в директории logs.
Запуск клиента производите в отдельном терминале из директории проекта:

```
python client.py {Your username}
```

Запуск клиента содержит один обязательный аргумент (username), и 2 необязательных (host,port) "client.py [-h] [-H HOST] [-p PORT] username".

Закончить выполнение клиента можно через команду ctrl+c, но предпочтительнее ввод команды:
```
quit
```
Посмотреть логи работы клиента можно в директории logs.

### Отправка сообщений:

При подключении клиент подключается в общий чат, 
сообщения вводятся непосредственно в терминал, как вы закончите набор сообщения просто нажмите enter для отправки сообщения.

Существуют специальные команды для работы с группами и отправки приватных сообщений:

Создать группу:
```
/create {group_name}
```

Вступить в группу:
```
/join {group_name}
```
После вступления в группу вы можете продолжать переписываться с её участниками, а можете выйти введя следующую команду.

Покинуть группу:
```
/leave {group_name}
```

Пригласить нового участника(для создателя группы):
```
/invite {group_name}
```
После отправки команды, пользователь получит сообщение следующего вида:
```
Вы приглашены в группу (group_name)
Для вступления введите команду "/join {group_name}"
```

Отправить приватное сообщения для конкретного пользователя:
```
/private {username} {message}
```

Автор:
- [Александр Мамонов](https://github.com/Alex386386) 